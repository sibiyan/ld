{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/OrderSummary/OrderSummary.js\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Container from \"@material-ui/core/Container\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"@material-ui/core/Select\";\nimport Grid from \"@material-ui/core/Grid\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { authAxios } from \"../../utils\";\nimport { checkoutURL, orderSummaryURL, orderAddressURL } from \"../../constants\";\nimport { fetchCart } from \"../../store/actions/cart\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    marginTop: theme.spacing.unit * 2,\n    overflowX: \"auto\"\n  },\n  table: {\n    minWidth: \"100\"\n  },\n  tableHead: {\n    background: \"#3f51b5\",\n    color: \"white\",\n    fontWeigth: \"bold\",\n    fontSize: \"20pt\"\n  },\n  tablecell: {\n    fontSize: \"12pt\"\n  },\n  paper: {\n    padding: theme.spacing(3),\n    margin: \"auto\",\n    minWidth: 350\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  addressCard: {\n    minWidth: 275\n  }\n}));\n\nconst OrderPreview = props => {\n  const {\n    data\n  } = props;\n  const {\n    orderAddress\n  } = props;\n  const classes = useStyles(); // console.log(data);\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, data && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, data.order_items.map(order_item => {\n    return /*#__PURE__*/React.createElement(Paper, {\n      className: classes.paper,\n      key: order_item.id,\n      elevation: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Box, {\n      mt: 1,\n      mx: \"auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: true,\n      container: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: true,\n      container: true,\n      direction: \"column\",\n      spacing: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"subtitle1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 27\n      }\n    }, order_item.item.title)), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"body2\",\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 31\n      }\n    })), /*#__PURE__*/React.createElement(Button, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 29\n      }\n    }, order_item.quantity), /*#__PURE__*/React.createElement(IconButton, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(RemoveIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 31\n      }\n    }))))), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"subtitle1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }, \"$19.00\"))))));\n  }), orderAddress && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    className: classes.addressCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h5\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 19\n    }\n  }, orderAddress.place), /*#__PURE__*/React.createElement(Typography, {\n    className: classes.pos,\n    color: \"textPrimary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }\n  }, orderAddress.area), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    component: \"p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 19\n    }\n  }, \"well meaning and kindly.\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }), '\"a benevolent smile\"')), /*#__PURE__*/React.createElement(CardActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 19\n    }\n  }, \"Change Address\"))))));\n};\n\nclass CheckoutForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      loading: false,\n      error: null,\n      success: false,\n      orderAddress: null,\n      addressID: 26\n    };\n\n    this.handleFetchOrder = () => {\n      this.setState({\n        loading: true\n      });\n      authAxios.get(orderSummaryURL).then(res => {\n        this.setState({\n          data: res.data,\n          loading: false\n        });\n        this.setState({\n          addressID: res.data.shipping_address\n        });\n      }).catch(err => {\n        if (err.response.status === 404) {\n          this.props.history.push(\"/orders\");\n        } else {\n          this.setState({\n            error: err,\n            loading: false\n          });\n        }\n      });\n    };\n\n    this.fetchAddress = () => {\n      this.setState({\n        loading: true\n      });\n      const {\n        addressID\n      } = this.state;\n      authAxios.get(orderAddressURL(addressID)).then(res => {\n        this.setState({\n          orderAddress: res.data,\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.submit = ev => {\n      ev.preventDefault();\n      this.setState({\n        loading: true\n      });\n      const {\n        selectedShippingAddress\n      } = this.state;\n      authAxios.post(checkoutURL, {\n        selectedShippingAddress\n      }).then(res => {\n        this.setState({\n          loading: false,\n          success: true\n        });\n        this.redirectToOrders();\n      }).catch(err => {\n        this.setState({\n          loading: false,\n          error: err\n        });\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    this.fetchAddress();\n  }\n\n  redirectToOrders() {\n    setTimeout(this.props.history.push(\"/orders\"), 10000);\n  }\n\n  render() {\n    const {\n      classes\n    } = this.props;\n    const {\n      refreshCart\n    } = this.props;\n    const {\n      data,\n      error,\n      loading,\n      success,\n      addressID,\n      orderAddress\n    } = this.state;\n    console.log(orderAddress);\n    return /*#__PURE__*/React.createElement(\"container\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 7\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 13\n      }\n    })), error && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 13\n      }\n    }, JSON.stringify(error))), /*#__PURE__*/React.createElement(OrderPreview, {\n      data: data,\n      orderAddress: orderAddress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h6\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }\n    }, \"Confirm Order\"), success && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 15\n      }\n    }, \"Your Order is successful\")), /*#__PURE__*/React.createElement(Button, {\n      loading: loading,\n      disabled: loading,\n      primary: true,\n      onClick: this.submit,\n      style: {\n        marginTop: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }\n    }, \"Submit\")));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(CheckoutForm); // export default CheckoutForm;","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/OrderSummary/OrderSummary.js"],"names":["React","Component","Link","connect","Paper","makeStyles","CircularProgress","Container","Alert","AlertTitle","Box","Typography","AddIcon","Button","Select","Grid","RemoveIcon","IconButton","Card","CardActions","CardContent","authAxios","checkoutURL","orderSummaryURL","orderAddressURL","fetchCart","useStyles","theme","root","width","marginTop","spacing","unit","overflowX","table","minWidth","tableHead","background","color","fontWeigth","fontSize","tablecell","paper","padding","margin","bullet","display","transform","title","pos","marginBottom","addressCard","OrderPreview","props","data","orderAddress","classes","order_items","map","order_item","id","item","cursor","quantity","place","area","CheckoutForm","state","loading","error","success","addressID","handleFetchOrder","setState","get","then","res","shipping_address","catch","err","response","status","history","push","fetchAddress","submit","ev","preventDefault","selectedShippingAddress","post","redirectToOrders","componentDidMount","setTimeout","render","refreshCart","console","log","JSON","stringify","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Container from \"@material-ui/core/Container\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport Button from \"@material-ui/core/Button\";\nimport Select from \"@material-ui/core/Select\";\nimport Grid from \"@material-ui/core/Grid\";\nimport RemoveIcon from \"@material-ui/icons/Remove\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\n\nimport { authAxios } from \"../../utils\";\nimport { checkoutURL, orderSummaryURL, orderAddressURL } from \"../../constants\";\nimport { fetchCart } from \"../../store/actions/cart\";\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: \"100%\",\n    marginTop: theme.spacing.unit * 2,\n    overflowX: \"auto\"\n  },\n  table: {\n    minWidth: \"100\"\n  },\n  tableHead: {\n    background: \"#3f51b5\",\n    color: \"white\",\n    fontWeigth: \"bold\",\n    fontSize: \"20pt\"\n  },\n  tablecell: {\n    fontSize: \"12pt\"\n  },\n  paper: {\n    padding: theme.spacing(3),\n    margin: \"auto\",\n    minWidth: 350\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\"\n  },\n  title: {\n    fontSize: 14\n  },\n  pos: {\n    marginBottom: 12\n  },\n  addressCard: {\n    minWidth: 275\n  }\n}));\n\nconst OrderPreview = props => {\n  const { data } = props;\n  const { orderAddress } = props;\n  const classes = useStyles();\n  // console.log(data);\n\n  return (\n    <React.Fragment>\n      {data && (\n        <React.Fragment>\n          {data.order_items.map(order_item => {\n            return (\n              <Paper\n                className={classes.paper}\n                key={order_item.id}\n                elevation={3}\n              >\n                <Box mt={1} mx=\"auto\">\n                  <Grid container spacing={2}>\n                    <Grid item xs={12} sm container>\n                      <Grid item xs container direction=\"column\" spacing={2}>\n                        <Grid item xs>\n                          <Typography gutterBottom variant=\"subtitle1\">\n                            {order_item.item.title}\n                          </Typography>\n                        </Grid>\n                        <Grid item>\n                          <Typography\n                            variant=\"body2\"\n                            style={{ cursor: \"pointer\" }}\n                          >\n                            <IconButton>\n                              <AddIcon />\n                            </IconButton>\n                            <Button>{order_item.quantity}</Button>\n                            <IconButton>\n                              <RemoveIcon />\n                            </IconButton>\n                          </Typography>\n                        </Grid>\n                      </Grid>\n                      <Grid item>\n                        <Typography variant=\"subtitle1\">$19.00</Typography>\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                </Box>\n              </Paper>\n            );\n          })}\n          {orderAddress && (\n            <div>\n              <br></br>\n              <Typography variant=\"h6\" component=\"h2\">\n                Shipping Address\n              </Typography>\n              <br></br>\n              <Card className={classes.addressCard}>\n                <CardContent>\n                  <Typography variant=\"h5\" component=\"h2\">\n                    {orderAddress.place}\n                  </Typography>\n                  <Typography className={classes.pos} color=\"textPrimary\">\n                    {orderAddress.area}\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"p\">\n                    well meaning and kindly.\n                    <br />\n                    {'\"a benevolent smile\"'}\n                  </Typography>\n                </CardContent>\n                <CardActions>\n                  <Button size=\"small\">Change Address</Button>\n                </CardActions>\n              </Card>\n            </div>\n          )}\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  );\n};\n\nclass CheckoutForm extends Component {\n  state = {\n    data: null,\n    loading: false,\n    error: null,\n    success: false,\n    orderAddress: null,\n    addressID: 26\n  };\n\n  componentDidMount() {\n    this.handleFetchOrder();\n    this.fetchAddress();\n  }\n\n  handleFetchOrder = () => {\n    this.setState({ loading: true });\n    authAxios\n      .get(orderSummaryURL)\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n        this.setState({ addressID: res.data.shipping_address });\n      })\n      .catch(err => {\n        if (err.response.status === 404) {\n          this.props.history.push(\"/orders\");\n        } else {\n          this.setState({ error: err, loading: false });\n        }\n      });\n  };\n\n  fetchAddress = () => {\n    this.setState({ loading: true });\n    const { addressID } = this.state;\n    authAxios\n      .get(orderAddressURL(addressID))\n      .then(res => {\n        this.setState({ orderAddress: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  submit = ev => {\n    ev.preventDefault();\n    this.setState({ loading: true });\n    const { selectedShippingAddress } = this.state;\n    authAxios\n      .post(checkoutURL, {\n        selectedShippingAddress\n      })\n      .then(res => {\n        this.setState({ loading: false, success: true });\n        this.redirectToOrders();\n      })\n      .catch(err => {\n        this.setState({ loading: false, error: err });\n      });\n  };\n\n  redirectToOrders() {\n    setTimeout(this.props.history.push(\"/orders\"), 10000);\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { refreshCart } = this.props;\n    const {\n      data,\n      error,\n      loading,\n      success,\n      addressID,\n      orderAddress\n    } = this.state;\n    console.log(orderAddress);\n\n    return (\n      <container>\n        {loading && (\n          <div>\n            <CircularProgress color=\"secondary\" />\n          </div>\n        )}\n        {error && (\n          <Alert severity=\"error\">\n            <AlertTitle>{JSON.stringify(error)}</AlertTitle>\n          </Alert>\n        )}\n        <OrderPreview data={data} orderAddress={orderAddress} />\n        <br></br>\n        <React.Fragment>\n          <Typography variant=\"h6\" component=\"h2\">\n            Confirm Order\n          </Typography>\n\n          {success && (\n            <Alert severity=\"success\">\n              <AlertTitle>{\"Your Order is successful\"}</AlertTitle>\n            </Alert>\n          )}\n          <Button\n            loading={loading}\n            disabled={loading}\n            primary\n            onClick={this.submit}\n            style={{ marginTop: \"10px\" }}\n          >\n            Submit\n          </Button>\n        </React.Fragment>\n      </container>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(CheckoutForm);\n\n// export default CheckoutForm;\n"]},"metadata":{},"sourceType":"module"}