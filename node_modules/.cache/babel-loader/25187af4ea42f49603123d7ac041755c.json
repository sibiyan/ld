{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/Index.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport BeachAccessIcon from \"@material-ui/icons/BeachAccess\";\nimport PostCard02 from \"./theme\";\nimport JssProvider from \"react-jss/lib/JssProvider\";\nimport { createGenerateClassName } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\nimport { addToCartURL, ShopProductListURL, orderItemDeleteURL, orderItemUpdateQuantityURL } from \"../../constants\";\nconst muiBaseTheme = createMuiTheme();\nconst generateClassName = createGenerateClassName({\n  dangerouslyUseGlobalCSS: true\n});\nconst theme = {\n  overrides: {\n    MuiCard: {\n      root: {\n        \"&.MuiPostCard--02\": {\n          borderRadius: muiBaseTheme.spacing.unit * 2,\n          // 16px\n          transition: \"0.3s\",\n          boxShadow: \"0px 14px 80px rgba(34, 35, 58, 0.2)\",\n          width: \"95%\",\n          position: \"relative\",\n          maxWidth: 800,\n          marginLeft: \"auto\",\n          overflow: \"initial\",\n          background: \"#ffffff\",\n          display: \"flex\",\n          alignItems: \"center\",\n          padding: `${muiBaseTheme.spacing.unit * 2}px 0`,\n          \"&:hover\": {\n            transform: \"translateY(-3px)\",\n            boxShadow: \"0 4px 20px 0 rgba(0,0,0,0.12)\"\n          },\n          \"& .MuiCardMedia-root\": {\n            flexShrink: 0,\n            width: \"40%\",\n            paddingTop: \"48%\",\n            transform: \"translateX(-24%)\",\n            boxShadow: \"4px 4px 20px 1px rgba(252, 56, 56, 0.2)\",\n            borderRadius: muiBaseTheme.spacing.unit * 2,\n            // 16\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            backgroundColor: muiBaseTheme.palette.common.white,\n            overflow: \"hidden\",\n            \"&:after\": {\n              content: '\" \"',\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              width: \"100%\",\n              height: \"100%\",\n              backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n              borderRadius: muiBaseTheme.spacing.unit * 2,\n              // 16\n              opacity: 0.5\n            }\n          },\n          \"& .MuiCardContent-root\": {\n            textAlign: \"left\",\n            paddingLeft: 0,\n            padding: muiBaseTheme.spacing.unit * 2\n          },\n          \"& .MuiTypography--heading\": {\n            fontWeight: \"bold\"\n          },\n          \"& .MuiTypography--subheading\": {\n            marginBottom: muiBaseTheme.spacing.unit * 2\n          },\n          \"& .MuiButton--readMore\": {\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            boxShadow: \"0px 4px 32px rgba(252, 56, 56, 0.4)\",\n            borderRadius: 100,\n            paddingLeft: 24,\n            paddingRight: 24,\n            color: \"#ffffff\"\n          }\n        }\n      }\n    }\n  }\n};\n\nclass ProductList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      error: null,\n      data: [],\n      formData: {}\n    };\n\n    this.handleToggleForm = () => {\n      const {\n        formVisible\n      } = this.state;\n      this.setState({\n        formVisible: !formVisible\n      });\n    };\n\n    this.handleFormatData = formData => {\n      // convert {colour: 1, size: 2} to [1,2] - they're all variations\n      return Object.keys(formData).map(key => {\n        return formData[key];\n      });\n    };\n\n    this.handleAddToCart = (slug, shop, place) => {\n      this.setState({\n        loading: true\n      });\n      const {\n        formData\n      } = this.state;\n      const variations = this.handleFormatData(formData);\n      authAxios.post(addToCartURL, {\n        place,\n        shop,\n        slug,\n        variations\n      }).then(res => {\n        this.props.refreshCart();\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.renderVariations = orderItem => {\n      let text = \"\";\n      orderItem.item_variations.forEach(iv => {\n        text += `${iv.variation.name}: ${iv.value}, `;\n      });\n      return text;\n    };\n\n    this.handleRemoveQuantityFromCart = slug => {\n      authAxios.post(orderItemUpdateQuantityURL, {\n        slug\n      }).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleRemoveItem = itemID => {\n      authAxios.delete(orderItemDeleteURL(itemID)).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleChange = (e, {\n      name,\n      value\n    }) => {\n      const {\n        formData\n      } = this.state;\n      const updatedFormData = { ...formData,\n        [name]: value\n      };\n      this.setState({\n        formData: updatedFormData\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n    this.setState({\n      loading: true\n    });\n    axios.get(ShopProductListURL(params.shopID)).then(res => {\n      this.setState({\n        data: res.data,\n        loading: false\n      });\n    }).catch(err => {\n      this.setState({\n        error: err,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      formData,\n      formVisible,\n      loading\n    } = this.state;\n    const item = data;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(JssProvider, {\n      generateClassName: generateClassName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      theme: createMuiTheme(theme),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      className: classes.cardGrid,\n      maxWidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 13\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 19\n      }\n    })), error && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 19\n      }\n    }, JSON.stringify(error)), \"This is an error alert \\u2014 \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 44\n      }\n    }, \"check it out!\")), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      maxWidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 15\n      }\n    }, data.map(card => /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      key: card,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"MuiPostCard--02\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardMedia, {\n      style: {\n        height: 0,\n        paddingTop: \"56%\"\n      },\n      className: classes.cardMedia,\n      image: card.image,\n      title: \"Image title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      className: classes.cardContent,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      gutterBottom: true,\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 25\n      }\n    }, card.title), /*#__PURE__*/React.createElement(Typography, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 25\n      }\n    }, card.category)), /*#__PURE__*/React.createElement(CardActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      variant: \"contained\",\n      color: \"primary\",\n      onClick: () => this.handleAddToCart(card.slug, card.shop),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 25\n      }\n    }, \"Add to cart\"))), data.variations && data.variations.map(v => {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(List, {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Avatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 35\n        }\n      }, /*#__PURE__*/React.createElement(ImageIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 37\n        }\n      }))), /*#__PURE__*/React.createElement(ListItemText, {\n        primary: \"Photos\",\n        secondary: \"Jan 9, 2014\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 33\n        }\n      }))));\n    }))))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(withStyles(theme)(ProductList));","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/Index.js"],"names":["React","connect","axios","Alert","AlertTitle","makeStyles","withStyles","Card","CardActionArea","CardActions","CardContent","CardMedia","Button","Typography","CircularProgress","CameraIcon","CssBaseline","Grid","Toolbar","Container","Link","List","ListItem","ListItemText","ListItemAvatar","Avatar","ImageIcon","WorkIcon","BeachAccessIcon","PostCard02","JssProvider","createGenerateClassName","MuiThemeProvider","createMuiTheme","fetchCart","authAxios","addToCartURL","ShopProductListURL","orderItemDeleteURL","orderItemUpdateQuantityURL","muiBaseTheme","generateClassName","dangerouslyUseGlobalCSS","theme","overrides","MuiCard","root","borderRadius","spacing","unit","transition","boxShadow","width","position","maxWidth","marginLeft","overflow","background","display","alignItems","padding","transform","flexShrink","paddingTop","backgroundImage","backgroundColor","palette","common","white","content","top","left","height","opacity","textAlign","paddingLeft","fontWeight","marginBottom","paddingRight","color","ProductList","Component","state","loading","error","data","formData","handleToggleForm","formVisible","setState","handleFormatData","Object","keys","map","key","handleAddToCart","slug","shop","place","variations","post","then","res","props","refreshCart","catch","err","renderVariations","orderItem","text","item_variations","forEach","iv","variation","name","value","handleRemoveQuantityFromCart","handleFetchOrder","handleRemoveItem","itemID","delete","handleChange","e","updatedFormData","componentDidMount","match","params","get","shopID","render","item","classes","cardGrid","JSON","stringify","card","cardMedia","image","cardContent","title","category","v","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { makeStyles, withStyles } from \"@material-ui/core/styles\";\n\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\n\nimport CameraIcon from \"@material-ui/icons/PhotoCamera\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Container from \"@material-ui/core/Container\";\nimport Link from \"@material-ui/core/Link\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport ImageIcon from \"@material-ui/icons/Image\";\nimport WorkIcon from \"@material-ui/icons/Work\";\nimport BeachAccessIcon from \"@material-ui/icons/BeachAccess\";\nimport PostCard02 from \"./theme\";\nimport JssProvider from \"react-jss/lib/JssProvider\";\nimport { createGenerateClassName } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\n\nimport {\n  addToCartURL,\n  ShopProductListURL,\n  orderItemDeleteURL,\n  orderItemUpdateQuantityURL\n} from \"../../constants\";\n\nconst muiBaseTheme = createMuiTheme();\n\nconst generateClassName = createGenerateClassName({\n  dangerouslyUseGlobalCSS: true\n});\n\nconst theme = {\n  overrides: {\n    MuiCard: {\n      root: {\n        \"&.MuiPostCard--02\": {\n          borderRadius: muiBaseTheme.spacing.unit * 2, // 16px\n          transition: \"0.3s\",\n          boxShadow: \"0px 14px 80px rgba(34, 35, 58, 0.2)\",\n          width: \"95%\",\n          position: \"relative\",\n          maxWidth: 800,\n          marginLeft: \"auto\",\n          overflow: \"initial\",\n          background: \"#ffffff\",\n          display: \"flex\",\n          alignItems: \"center\",\n          padding: `${muiBaseTheme.spacing.unit * 2}px 0`,\n          \"&:hover\": {\n            transform: \"translateY(-3px)\",\n            boxShadow: \"0 4px 20px 0 rgba(0,0,0,0.12)\"\n          },\n          \"& .MuiCardMedia-root\": {\n            flexShrink: 0,\n            width: \"40%\",\n            paddingTop: \"48%\",\n            transform: \"translateX(-24%)\",\n            boxShadow: \"4px 4px 20px 1px rgba(252, 56, 56, 0.2)\",\n            borderRadius: muiBaseTheme.spacing.unit * 2, // 16\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            backgroundColor: muiBaseTheme.palette.common.white,\n            overflow: \"hidden\",\n            \"&:after\": {\n              content: '\" \"',\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              width: \"100%\",\n              height: \"100%\",\n              backgroundImage:\n                \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n              borderRadius: muiBaseTheme.spacing.unit * 2, // 16\n              opacity: 0.5\n            }\n          },\n          \"& .MuiCardContent-root\": {\n            textAlign: \"left\",\n            paddingLeft: 0,\n            padding: muiBaseTheme.spacing.unit * 2\n          },\n          \"& .MuiTypography--heading\": {\n            fontWeight: \"bold\"\n          },\n          \"& .MuiTypography--subheading\": {\n            marginBottom: muiBaseTheme.spacing.unit * 2\n          },\n          \"& .MuiButton--readMore\": {\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            boxShadow: \"0px 4px 32px rgba(252, 56, 56, 0.4)\",\n            borderRadius: 100,\n            paddingLeft: 24,\n            paddingRight: 24,\n            color: \"#ffffff\"\n          }\n        }\n      }\n    }\n  }\n};\n\nclass ProductList extends React.Component {\n  state = {\n    loading: false,\n    error: null,\n    data: [],\n    formData: {}\n  };\n\n  componentDidMount() {\n    const {\n      match: { params }\n    } = this.props;\n    this.setState({ loading: true });\n    axios\n      .get(ShopProductListURL(params.shopID))\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  }\n\n  handleToggleForm = () => {\n    const { formVisible } = this.state;\n    this.setState({\n      formVisible: !formVisible\n    });\n  };\n\n  handleFormatData = formData => {\n    // convert {colour: 1, size: 2} to [1,2] - they're all variations\n    return Object.keys(formData).map(key => {\n      return formData[key];\n    });\n  };\n\n  handleAddToCart = (slug, shop, place) => {\n    this.setState({ loading: true });\n    const { formData } = this.state;\n    const variations = this.handleFormatData(formData);\n    authAxios\n      .post(addToCartURL, { place, shop, slug, variations })\n      .then(res => {\n        this.props.refreshCart();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  renderVariations = orderItem => {\n    let text = \"\";\n    orderItem.item_variations.forEach(iv => {\n      text += `${iv.variation.name}: ${iv.value}, `;\n    });\n    return text;\n  };\n\n  handleRemoveQuantityFromCart = slug => {\n    authAxios\n      .post(orderItemUpdateQuantityURL, { slug })\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleRemoveItem = itemID => {\n    authAxios\n      .delete(orderItemDeleteURL(itemID))\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleChange = (e, { name, value }) => {\n    const { formData } = this.state;\n    const updatedFormData = {\n      ...formData,\n      [name]: value\n    };\n    this.setState({ formData: updatedFormData });\n  };\n\n  render() {\n    const { data, error, formData, formVisible, loading } = this.state;\n    const item = data;\n    const { classes } = this.props;\n\n    return (\n      <JssProvider generateClassName={generateClassName}>\n        <MuiThemeProvider theme={createMuiTheme(theme)}>\n          <div>\n            <CssBaseline />\n            <Container className={classes.cardGrid} maxWidth=\"md\">\n              {loading && (\n                <div className={classes.loading}>\n                  <CircularProgress />\n                  <CircularProgress color=\"secondary\" />\n                </div>\n              )}\n              {error && (\n                <Alert severity=\"error\">\n                  <AlertTitle>{JSON.stringify(error)}</AlertTitle>\n                  This is an error alert — <strong>check it out!</strong>\n                </Alert>\n              )}\n              <Grid container spacing={4} maxWidth=\"md\">\n                {data.map(card => (\n                  <Grid item key={card} xs={12} sm={6} md={4}>\n                    <Card className={\"MuiPostCard--02\"}>\n                      <CardMedia\n                        style={{ height: 0, paddingTop: \"56%\" }}\n                        className={classes.cardMedia}\n                        image={card.image}\n                        title=\"Image title\"\n                      />\n                      <CardContent className={classes.cardContent}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                          {card.title}\n                        </Typography>\n                        <Typography>{card.category}</Typography>\n                      </CardContent>\n                      <CardActions>\n                        <Button\n                          size=\"small\"\n                          variant=\"contained\"\n                          color=\"primary\"\n                          onClick={() =>\n                            this.handleAddToCart(card.slug, card.shop)\n                          }\n                        >\n                          Add to cart\n                        </Button>\n                      </CardActions>\n                    </Card>\n                    {data.variations &&\n                      data.variations.map(v => {\n                        return (\n                          <React.Fragment>\n                            <List className={classes.root}>\n                              <ListItem>\n                                <ListItemAvatar>\n                                  <Avatar>\n                                    <ImageIcon />\n                                  </Avatar>\n                                </ListItemAvatar>\n                                <ListItemText\n                                  primary=\"Photos\"\n                                  secondary=\"Jan 9, 2014\"\n                                />\n                              </ListItem>\n                            </List>\n                          </React.Fragment>\n                        );\n                      })}\n                  </Grid>\n                ))}\n              </Grid>\n            </Container>\n          </div>\n        </MuiThemeProvider>\n      </JssProvider>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(withStyles(theme)(ProductList));\n"]},"metadata":{},"sourceType":"module"}