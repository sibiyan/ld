{"ast":null,"code":"var _jsxFileName = \"/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/Products.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { withRouter } from \"react-router-dom\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Divider from \"@material-ui/core/Divider\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport JssProvider from \"react-jss/lib/JssProvider\";\nimport { createGenerateClassName } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\nimport { addToCartURL, ShopProductListURL, orderItemDeleteURL, orderItemUpdateQuantityURL } from \"../../constants\";\nconst muiBaseTheme = createMuiTheme();\nconst generateClassName = createGenerateClassName({\n  dangerouslyUseGlobalCSS: true\n});\nconst theme = {\n  overrides: {\n    MuiCard: {\n      root: {\n        \"&.MuiEngagementCard--01\": {\n          transition: \"0.3s\",\n          maxWidth: 304,\n          margin: \"auto\",\n          boxShadow: \"0 8px 40px -12px rgba(0,0,0,0.3)\",\n          \"&:hover\": {\n            boxShadow: \"0 16px 70px -12.125px rgba(0,0,0,0.3)\"\n          },\n          \"& .MuiCardMedia-root\": {\n            paddingTop: \"56.25%\"\n          },\n          \"& .MuiCardContent-root\": {\n            textAlign: \"left\",\n            padding: muiBaseTheme.spacing.unit * 3\n          },\n          \"& .MuiDivider-root\": {\n            margin: `${muiBaseTheme.spacing.unit * 3}px 0`\n          },\n          \"& .MuiTypography--heading\": {\n            fontWeight: \"bold\"\n          },\n          \"& .MuiTypography--subheading\": {\n            lineHeight: 1.8\n          },\n          \"& .MuiAvatar-root\": {\n            display: \"inline-block\",\n            border: \"2px solid white\",\n            \"&:not(:first-of-type)\": {\n              marginLeft: -muiBaseTheme.spacing.unit\n            }\n          },\n          \"& .MuiButton--readMore\": {\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            boxShadow: \"0px 4px 32px rgba(252, 56, 56, 0.4)\",\n            borderRadius: 100,\n            paddingLeft: 24,\n            paddingRight: 24,\n            color: \"#ffffff\"\n          }\n        }\n      }\n    }\n  }\n};\n\nclass ProductList extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: false,\n      error: null,\n      data: [],\n      formData: {}\n    };\n\n    this.handleToggleForm = () => {\n      const {\n        formVisible\n      } = this.state;\n      this.setState({\n        formVisible: !formVisible\n      });\n    };\n\n    this.handleFormatData = formData => {\n      // convert {colour: 1, size: 2} to [1,2] - they're all variations\n      return Object.keys(formData).map(key => {\n        return formData[key];\n      });\n    };\n\n    this.handleAddToCart = (id, shop, place) => {\n      this.setState({\n        loading: true\n      });\n      const {\n        formData\n      } = this.state;\n      const variations = this.handleFormatData(formData);\n      authAxios.post(addToCartURL, {\n        place,\n        shop,\n        id,\n        variations\n      }).then(res => {\n        this.props.refreshCart();\n        this.setState({\n          loading: false\n        });\n      }).catch(err => {\n        this.setState({\n          error: err,\n          loading: false\n        });\n      });\n    };\n\n    this.renderVariations = orderItem => {\n      let text = \"\";\n      orderItem.item_variations.forEach(iv => {\n        text += `${iv.variation.name}: ${iv.value}, `;\n      });\n      return text;\n    };\n\n    this.handleRemoveQuantityFromCart = slug => {\n      authAxios.post(orderItemUpdateQuantityURL, {\n        slug\n      }).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleRemoveItem = itemID => {\n      authAxios.delete(orderItemDeleteURL(itemID)).then(res => {\n        this.handleFetchOrder();\n      }).catch(err => {\n        this.setState({\n          error: err\n        });\n      });\n    };\n\n    this.handleChange = (e, {\n      name,\n      value\n    }) => {\n      const {\n        formData\n      } = this.state;\n      const updatedFormData = { ...formData,\n        [name]: value\n      };\n      this.setState({\n        formData: updatedFormData\n      });\n    };\n  }\n\n  componentDidMount() {\n    const {\n      match: {\n        params\n      }\n    } = this.props;\n    this.setState({\n      loading: true\n    });\n    axios.get(ShopProductListURL(params.shopID)).then(res => {\n      this.setState({\n        data: res.data,\n        loading: false\n      });\n    }).catch(err => {\n      this.setState({\n        error: err,\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    const {\n      data,\n      error,\n      loading\n    } = this.state; // const item = data;\n\n    const {\n      classes,\n      isAuthenticated\n    } = this.props;\n    console.log(isAuthenticated);\n    return /*#__PURE__*/React.createElement(JssProvider, {\n      generateClassName: generateClassName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      theme: createMuiTheme(theme),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CssBaseline, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Container, {\n      className: classes.cardGrid,\n      maxWidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, loading && /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.loading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(CircularProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(CircularProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 19\n      }\n    })), error && /*#__PURE__*/React.createElement(Alert, {\n      severity: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(AlertTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 19\n      }\n    }, JSON.stringify(error)), \"This is an error alert \\u2014 \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 44\n      }\n    }, \"check it out!\")), /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 4,\n      maxwidth: \"md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }, data.map(card => /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      key: card.id,\n      xs: 12,\n      sm: 6,\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      className: \"MuiEngagementCard--01\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(CardMedia, {\n      className: \"MuiCardMedia-root\",\n      image: card.image,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(CardContent, {\n      className: \"MuiCardContent-root\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: \"MuiTypography--date\",\n      variant: \"overline\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 25\n      }\n    }, card.category_name), /*#__PURE__*/React.createElement(Typography, {\n      className: \"MuiTypography--heading\",\n      variant: \"h6\",\n      gutterBottom: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 25\n      }\n    }, card.title), /*#__PURE__*/React.createElement(Typography, {\n      className: \"MuiTypography--subheading\",\n      variant: \"h6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    }, \"Rs: \", card.price), /*#__PURE__*/React.createElement(Divider, {\n      className: \"MuiDivider-root\",\n      light: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      className: \"MuiButton--readMore\",\n      onClick: () => this.handleAddToCart(card.id, card.shop),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 25\n      }\n    }, \"Add to cart\"))), card.variations && card.variations.map(v => {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 27\n        }\n      }, /*#__PURE__*/React.createElement(List, {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 29\n        }\n      }, /*#__PURE__*/React.createElement(ListItem, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 31\n        }\n      }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 35\n        }\n      }, v.name)), /*#__PURE__*/React.createElement(ListItemText, {\n        primary: \"Photos\",\n        secondary: \"Jan 9, 2014\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 33\n        }\n      }))));\n    }))))))));\n  }\n\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(withStyles(theme)(ProductList)));","map":{"version":3,"sources":["/Users/swalihvpm/Desktop/django-react/django-react-ecommerce/src/components/ProductList/Products.js"],"names":["React","connect","axios","Alert","AlertTitle","withStyles","withRouter","Card","CardContent","CardMedia","Button","Typography","CircularProgress","Divider","CssBaseline","Grid","Container","List","ListItem","ListItemText","ListItemAvatar","JssProvider","createGenerateClassName","MuiThemeProvider","createMuiTheme","fetchCart","authAxios","addToCartURL","ShopProductListURL","orderItemDeleteURL","orderItemUpdateQuantityURL","muiBaseTheme","generateClassName","dangerouslyUseGlobalCSS","theme","overrides","MuiCard","root","transition","maxWidth","margin","boxShadow","paddingTop","textAlign","padding","spacing","unit","fontWeight","lineHeight","display","border","marginLeft","backgroundImage","borderRadius","paddingLeft","paddingRight","color","ProductList","Component","state","loading","error","data","formData","handleToggleForm","formVisible","setState","handleFormatData","Object","keys","map","key","handleAddToCart","id","shop","place","variations","post","then","res","props","refreshCart","catch","err","renderVariations","orderItem","text","item_variations","forEach","iv","variation","name","value","handleRemoveQuantityFromCart","slug","handleFetchOrder","handleRemoveItem","itemID","delete","handleChange","e","updatedFormData","componentDidMount","match","params","get","shopID","render","classes","isAuthenticated","console","log","cardGrid","JSON","stringify","card","image","category_name","title","price","v","mapDispatchToProps","dispatch","mapStateToProps","auth","token"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport axios from \"axios\";\n\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { withRouter } from \"react-router-dom\";\n\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Divider from \"@material-ui/core/Divider\";\n\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\n\nimport JssProvider from \"react-jss/lib/JssProvider\";\nimport { createGenerateClassName } from \"@material-ui/core/styles\";\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n\nimport { fetchCart } from \"../../store/actions/cart\";\nimport { authAxios } from \"../../utils\";\n\nimport {\n  addToCartURL,\n  ShopProductListURL,\n  orderItemDeleteURL,\n  orderItemUpdateQuantityURL\n} from \"../../constants\";\n\nconst muiBaseTheme = createMuiTheme();\n\nconst generateClassName = createGenerateClassName({\n  dangerouslyUseGlobalCSS: true\n});\n\nconst theme = {\n  overrides: {\n    MuiCard: {\n      root: {\n        \"&.MuiEngagementCard--01\": {\n          transition: \"0.3s\",\n          maxWidth: 304,\n          margin: \"auto\",\n          boxShadow: \"0 8px 40px -12px rgba(0,0,0,0.3)\",\n          \"&:hover\": {\n            boxShadow: \"0 16px 70px -12.125px rgba(0,0,0,0.3)\"\n          },\n          \"& .MuiCardMedia-root\": {\n            paddingTop: \"56.25%\"\n          },\n          \"& .MuiCardContent-root\": {\n            textAlign: \"left\",\n            padding: muiBaseTheme.spacing.unit * 3\n          },\n          \"& .MuiDivider-root\": {\n            margin: `${muiBaseTheme.spacing.unit * 3}px 0`\n          },\n          \"& .MuiTypography--heading\": {\n            fontWeight: \"bold\"\n          },\n          \"& .MuiTypography--subheading\": {\n            lineHeight: 1.8\n          },\n          \"& .MuiAvatar-root\": {\n            display: \"inline-block\",\n            border: \"2px solid white\",\n            \"&:not(:first-of-type)\": {\n              marginLeft: -muiBaseTheme.spacing.unit\n            }\n          },\n          \"& .MuiButton--readMore\": {\n            backgroundImage: \"linear-gradient(147deg, #fe8a39 0%, #fd3838 74%)\",\n            boxShadow: \"0px 4px 32px rgba(252, 56, 56, 0.4)\",\n            borderRadius: 100,\n            paddingLeft: 24,\n            paddingRight: 24,\n            color: \"#ffffff\"\n          }\n        }\n      }\n    }\n  }\n};\n\nclass ProductList extends React.Component {\n  state = {\n    loading: false,\n    error: null,\n    data: [],\n    formData: {}\n  };\n\n  componentDidMount() {\n    const {\n      match: { params }\n    } = this.props;\n    this.setState({ loading: true });\n    axios\n      .get(ShopProductListURL(params.shopID))\n      .then(res => {\n        this.setState({ data: res.data, loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  }\n\n  handleToggleForm = () => {\n    const { formVisible } = this.state;\n    this.setState({\n      formVisible: !formVisible\n    });\n  };\n\n  handleFormatData = formData => {\n    // convert {colour: 1, size: 2} to [1,2] - they're all variations\n    return Object.keys(formData).map(key => {\n      return formData[key];\n    });\n  };\n\n  handleAddToCart = (id, shop, place) => {\n    this.setState({ loading: true });\n    const { formData } = this.state;\n    const variations = this.handleFormatData(formData);\n    authAxios\n      .post(addToCartURL, { place, shop, id, variations })\n      .then(res => {\n        this.props.refreshCart();\n        this.setState({ loading: false });\n      })\n      .catch(err => {\n        this.setState({ error: err, loading: false });\n      });\n  };\n\n  renderVariations = orderItem => {\n    let text = \"\";\n    orderItem.item_variations.forEach(iv => {\n      text += `${iv.variation.name}: ${iv.value}, `;\n    });\n    return text;\n  };\n\n  handleRemoveQuantityFromCart = slug => {\n    authAxios\n      .post(orderItemUpdateQuantityURL, { slug })\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleRemoveItem = itemID => {\n    authAxios\n      .delete(orderItemDeleteURL(itemID))\n      .then(res => {\n        this.handleFetchOrder();\n      })\n      .catch(err => {\n        this.setState({ error: err });\n      });\n  };\n\n  handleChange = (e, { name, value }) => {\n    const { formData } = this.state;\n    const updatedFormData = {\n      ...formData,\n      [name]: value\n    };\n    this.setState({ formData: updatedFormData });\n  };\n\n  render() {\n    const { data, error, loading } = this.state;\n    // const item = data;\n    const { classes, isAuthenticated } = this.props;\n    console.log(isAuthenticated);\n\n    return (\n      <JssProvider generateClassName={generateClassName}>\n        <MuiThemeProvider theme={createMuiTheme(theme)}>\n          <div>\n            <CssBaseline />\n            <Container className={classes.cardGrid} maxWidth=\"md\">\n              {loading && (\n                <div className={classes.loading}>\n                  <CircularProgress />\n                  <CircularProgress color=\"secondary\" />\n                </div>\n              )}\n              {error && (\n                <Alert severity=\"error\">\n                  <AlertTitle>{JSON.stringify(error)}</AlertTitle>\n                  This is an error alert — <strong>check it out!</strong>\n                </Alert>\n              )}\n              <Grid container spacing={4} maxwidth=\"md\">\n                {data.map(card => (\n                  <Grid item key={card.id} xs={12} sm={6} md={4}>\n                    <Card className={\"MuiEngagementCard--01\"}>\n                      <CardMedia\n                        className={\"MuiCardMedia-root\"}\n                        image={card.image}\n                      />\n                      <CardContent className={\"MuiCardContent-root\"}>\n                        <Typography\n                          className={\"MuiTypography--date\"}\n                          variant={\"overline\"}\n                        >\n                          {card.category_name}\n                        </Typography>\n                        <Typography\n                          className={\"MuiTypography--heading\"}\n                          variant={\"h6\"}\n                          gutterBottom\n                        >\n                          {card.title}\n                        </Typography>\n                        <Typography\n                          className={\"MuiTypography--subheading\"}\n                          variant={\"h6\"}\n                        >\n                          Rs: {card.price}\n                        </Typography>\n                        <Divider className={\"MuiDivider-root\"} light />\n                        <Button\n                          className={\"MuiButton--readMore\"}\n                          onClick={() =>\n                            this.handleAddToCart(card.id, card.shop)\n                          }\n                        >\n                          Add to cart\n                        </Button>\n                      </CardContent>\n                    </Card>\n                    {card.variations &&\n                      card.variations.map(v => {\n                        return (\n                          <React.Fragment>\n                            <List className={classes.root}>\n                              <ListItem>\n                                <ListItemAvatar>\n                                  <p>{v.name}</p>\n                                </ListItemAvatar>\n                                <ListItemText\n                                  primary=\"Photos\"\n                                  secondary=\"Jan 9, 2014\"\n                                />\n                              </ListItem>\n                            </List>\n                          </React.Fragment>\n                        );\n                      })}\n                  </Grid>\n                ))}\n              </Grid>\n            </Container>\n          </div>\n        </MuiThemeProvider>\n      </JssProvider>\n    );\n  }\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    refreshCart: () => dispatch(fetchCart())\n  };\n};\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(withStyles(theme)(ProductList))\n);\n"]},"metadata":{},"sourceType":"module"}